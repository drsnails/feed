(this["webpackJsonptoy-app"]=this["webpackJsonptoy-app"]||[]).push([[0],{129:function(e,t,n){e.exports=n(191)},134:function(e,t,n){},187:function(e,t){},190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),s=n.n(o),c=(n(134),n(14)),i=n(15),l=n(17),u=n(16),p=n(22),m=n(7),d=n(19),h=n(28),f=n(230),g=n(227),v=n(112),y=n.n(v),b=n(221),E=n(65),O=n(224),j=n(226),w=n(228),S=n(229),k=n(53),x=Object(b.a)((function(e){return{root:{maxWidth:345},media:{paddingTop:"56.25%",margin:"0 auto",objectFit:"contain",backgroundSize:"contain"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:E.a[500]}}}));function C(e){var t=x(),n=e.toy,a=e.onRemove,o=n.imgUrl||"https://robohash.org/".concat(n.name,"?set=set1");return r.a.createElement(O.a,{className:"".concat(t.root," toy-card")},r.a.createElement(j.a,{title:n.name,subheader:n.type,action:r.a.createElement(g.a,{color:"inherit",onClick:function(){a(n._id)},"aria-label":"delete",className:"".concat(t.margin," delete-card")},r.a.createElement(y.a,{fontSize:"large"}))}),r.a.createElement("div",{className:"toy-img-container"},r.a.createElement(w.a,{image:o,title:"TOYY",className:t.media})),r.a.createElement(S.a,null,r.a.createElement(k.a,{variant:"body1",color:"textSecondary",component:"p"},"In Stock:  ",n.inStock?" true":" false"),r.a.createElement(k.a,{variant:"body1",color:"textSecondary",component:"p"},"Price:   ","$".concat(n.price))),r.a.createElement("section",{className:"toy-prev-btns"},r.a.createElement(f.a,{className:"btn-link",href:"#text-buttons",color:"primary"},r.a.createElement(h.b,{to:"/edit/".concat(n._id)},"Edit")),r.a.createElement(f.a,{className:"btn-link",href:"#text-buttons",color:"primary"},r.a.createElement(h.b,{to:"/details/".concat(n._id)},"Details"))))}function I(e){var t=e.toys,n=e.onRemove;return r.a.createElement("div",{className:"toy-list"},t.map((function(e){return r.a.createElement(C,{toy:e,key:e._id,onRemove:n})})))}var N=n(5),T=n.n(N),U=n(9),R=n(113),_=n.n(R).a.create({withCredentials:!0}),M=function(e,t){return P(e,"GET",t)},A=function(e,t){return P(e,"POST",t)},D=function(e,t){return P(e,"PUT",t)},L=function(e,t){return P(e,"DELETE",t)};function P(e){return B.apply(this,arguments)}function B(){return(B=Object(U.a)(T.a.mark((function e(t){var n,a,r,o=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,console.log(a),e.next=6,_({url:"".concat("/api/").concat(t),method:n,data:a});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:throw e.prev=10,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Y={query:function(e){var t="?search=".concat(e.search,"&minPrice=").concat(e.minPrice,"&maxPrice=").concat(e.maxPrice,"&type=").concat(e.type,"&inStock=").concat(e.inStock,"\n    ");return M("toy".concat(t))},getById:function(e){return M("toy/".concat(e))},remove:function(e){return L("toy/".concat(e))},save:function(e){return e._id?D("toy/".concat(e._id),e):A("toy",e)}};function q(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.query(e);case 2:a=t.sent,n({type:"SET_TOYS",toys:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var V=n(235),W=n(238),F=n(233),H=n(241),z=n(236),J=n(239),G=n(234),X=n(237),$=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e;return r.a.createElement("div",{className:"filter-container"},r.a.createElement(W.a,{onChange:this.props.handleInputs,type:"search",label:"Search",className:"search-input",id:"outlined-basic",name:"search"}),r.a.createElement(W.a,{onChange:this.props.handleInputs,type:"number",label:"Min Price",className:"min-price",id:"outlined-basic",name:"minPrice"}),r.a.createElement(W.a,{onChange:this.props.handleInputs,type:"number",label:"Max Price",className:"max-price",id:"outlined-basic",name:"maxPrice"}),r.a.createElement(F.a,{required:!0,className:"form-filter"},r.a.createElement(H.a,{id:"demo-simple-select-required-label"},"Filter By"),r.a.createElement(z.a,(e={onChange:this.props.handleInputs,labelId:"demo-simple-select-required-label",id:"demo-simple-select-required",defaultValue:"All",name:"type"},Object(p.a)(e,"id",""),Object(p.a)(e,"name","type"),e),r.a.createElement(J.a,{value:"All"},r.a.createElement("em",null,"None")),r.a.createElement(J.a,{value:"Funny"},"Funny"),r.a.createElement(J.a,{value:"Adult"},"Adult"),r.a.createElement(J.a,{value:"Educational"},"Educational"))),r.a.createElement(G.a,{value:"top",control:r.a.createElement(X.a,{onChange:this.props.handleInputs,color:"primary",name:"inStock"}),label:"In Stock",labelPlacement:"top",className:"check-box"}))}}]),n}(a.Component),K={login:function(e){return Q.apply(this,arguments)},logout:function(){return ee.apply(this,arguments)},signup:function(e){return Z.apply(this,arguments)},getUsers:function(){return M("user")},getById:function(e){return M("user/".concat(e))},remove:function(e){return L("user/".concat(e))},update:function(e){return D("user/".concat(e._id),e)}};function Q(){return(Q=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("auth/login",t);case 2:return n=e.sent,e.abrupt("return",te(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",te(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function ne(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.signup(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ae(){return function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var re={add:function(e){return oe.apply(this,arguments)},query:function(e){if(console.log("query -> filterBy",e),e)var t="?toyId=".concat(e.toyId);return M("review".concat(t||""))},remove:function(e){return L("review/".concat(e))}};function oe(){return(oe=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return console.log("loadReviews -> filterBy",e),function(){var t=Object(U.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.query(e);case 3:a=t.sent,console.log("loadReviews -> reviews",a),n({type:"SET_REVIEWS",reviews:a}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}var ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{search:"",minPrice:-1/0,maxPrice:1/0,type:"All",inStock:!1}},e.onRemove=function(t){e.props.removeToy(t)},e.onAdd=function(e){},e.handleInputs=function(t){var n=t.target.name,a="inStock"===n?t.target.checked:t.target.value;e.setState(Object(m.a)(Object(m.a)({},e.state),{},{filterBy:Object(m.a)(Object(m.a)({},e.state.filterBy),{},Object(p.a)({},n,a))}),(function(){e.props.loadToys(e.state.filterBy)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.state.filterBy),this.props.loadReviews()}},{key:"render",value:function(){var e=this.props.toys;return e?r.a.createElement("div",{className:"toy-app"},r.a.createElement("section",{className:"main-control-container"},r.a.createElement(V.a,{className:"add-link"},r.a.createElement(h.b,{to:"/edit"},"Add Toy")),r.a.createElement($,{filterBy:this.state.filterBy,handleInputs:this.handleInputs})),r.a.createElement(I,{toys:e,onRemove:this.onRemove})):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),ie={loadToys:q,removeToy:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.remove(e);case 2:t.sent,n({type:"REMOVE_TOY",toyId:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:ae,loadReviews:se},le=Object(d.b)((function(e){return{toys:e.toyReducer.toys}}),ie)(ce),ue=n(11),pe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.loggedInUser;return r.a.createElement("nav",{className:"header-nav container"},r.a.createElement("h1",null,"TOYS ARE TOYS"),t&&r.a.createElement("section",{className:"header-msg"},r.a.createElement("h3",null,"Hello ",t.username),t.isAdmin&&r.a.createElement("p",null,"You Are An Admin!")),r.a.createElement(V.a,null,r.a.createElement(h.b,{to:"/toy"},"Toys")),r.a.createElement("section",{className:"header-btns"},r.a.createElement("section",{className:"back"},r.a.createElement(V.a,{onClick:function(){return e.props.history.goBack()}},"Back")),r.a.createElement("div",{className:"log-container"},!t&&r.a.createElement("section",{className:"login"},r.a.createElement(V.a,null,r.a.createElement(h.b,{to:"/"},"Login"))),t&&r.a.createElement("section",{className:"logout"},r.a.createElement(V.a,{onClick:this.props.logout},r.a.createElement(h.b,{to:"/"},"Logout"))))))}}]),n}(a.Component),me={logout:ae},de=Object(d.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),me)(Object(ue.f)(pe)),he={uploadImg:function(e){return fe.apply(this,arguments)}};function fe(){return(fe=Object(U.a)(T.a.mark((function e(t){var n,a,r,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"staviao",n="https://api.cloudinary.com/v1_1/".concat("staviao","/image/upload"),(a=new FormData).append("file",t.target.files[0]),a.append("upload_preset","toyshop"),e.prev=5,e.next=8,fetch(n,{method:"POST",body:a});case 8:return r=e.sent,e.next=11,r.json();case 11:return o=e.sent,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var ge=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",price:"",type:"",inStock:"",imgUrl:"",isLoading:""},e.handleInputs=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(m.a)(Object(m.a)({},e.state),{},Object(p.a)({},n,a)))},e.onSave=function(){var t=Object(U.a)(T.a.mark((function t(n){var a,r,o,s,c,i,l,u,p;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.setState({isLoading:!0}),a=e.state,r=a.name,o=a.price,s=a.type,c=a.imgUrl,console.log("onSave -> imgUrl",c),i="true"===e.state.inStock,l=e.props.match.params.toyId){t.next=16;break}return console.log("addd1"),u={name:r,price:+o,type:s,inStock:i,imgUrl:c},t.next=11,e.props.saveToy(u);case 11:t.sent,e.setState({isLoading:""}),e.props.history.push("/toy"),t.next=26;break;case 16:return console.log("eddditt"),t.next=19,Y.getById(l);case 19:return p=t.sent,console.log("onSave -> imgUrl",c),p=Object(m.a)(Object(m.a)({},p),{},{name:r,price:o,type:s,inStock:i,imgUrl:c}),t.next=24,e.props.saveToy(p);case 24:e.setState({isLoading:""}),e.props.history.push("/toy");case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onUploadImg=function(){var t=Object(U.a)(T.a.mark((function t(n){var a,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({isLoading:"true"}),t.next=4,he.uploadImg(n);case 4:a=t.sent,r=a.secure_url,e.setState({isLoading:""}),console.log("onUploadImg -> imgUrl",r),e.setState(Object(m.a)(Object(m.a)({},e.state),{},{imgUrl:r}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n,a,r,o,s,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.toyId)){e.next=9;break}return e.next=4,Y.getById(t);case 4:n=e.sent,a=n.name,r=n.price,o=n.type,s=n.inStock,c=n.imgUrl,this.setState(Object(m.a)(Object(m.a)({},this.state),{},{name:a,price:r,type:o,inStock:s,imgUrl:c})),e.next=10;break;case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getYesNo",value:function(){if(this.state.inStock)return this.state.inStock}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSave,className:"container edit-form",action:""},r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",className:"edit-input name-input",id:"outlined-basic",value:this.state.name,autoComplete:"false",onChange:this.handleInputs,label:"Enter Toy's Name",type:"text",name:"name"})),r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",className:"edit-input price-input",id:"outlined-basic",value:this.state.price,onChange:this.handleInputs,type:"number",name:"price",label:"Enter Price"})),r.a.createElement("div",null,r.a.createElement(z.a,{value:this.state.type||"1",onChange:this.handleInputs,name:"type",id:""},r.a.createElement(J.a,{value:"1",disabled:!0},"Type"),r.a.createElement(J.a,{value:"Funny"},"Funny"),r.a.createElement(J.a,{value:"Adult"},"Adult"),r.a.createElement(J.a,{value:"Educational"},"Educational"))),r.a.createElement("div",null,r.a.createElement(z.a,{value:this.getYesNo()||"1",onChange:this.handleInputs,name:"inStock",id:""},r.a.createElement(J.a,{value:"1",disabled:!0},"In Stock"),r.a.createElement(J.a,{value:"true"},"Yes"),r.a.createElement(J.a,{value:"false"},"No"))),r.a.createElement("div",null,r.a.createElement(W.a,{variant:"outlined",className:"edit-input",id:"outlined-basic",onChange:this.onUploadImg,type:"file",name:"upload"})),r.a.createElement(V.a,{disabled:this.state.isLoading,size:"large",variant:"contained",color:"primary",onClick:this.onSave,className:"save-toy-btn"},"Save"))}}]),n}(a.Component),ve={saveToy:function(e){var t=e._id?"UPDATE_TOY":"ADD_TOY";return function(){var n=Object(U.a)(T.a.mark((function n(a){return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y.save(e);case 2:n.sent,a({type:t,toy:e});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},ye=Object(d.b)((function(e){return{toys:e.toyReducer.toys}}),ve)(ge),be=n(46),Ee={reviews:[],selectedReview:null};function Oe(e){return console.log("ReviewPreview -> props",e),r.a.createElement("div",null,e.review.content)}var je,we=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.reviews;return console.log("render -> reviews",e),r.a.createElement("div",{className:"review-list"},e.map((function(e){return r.a.createElement(Oe,{review:e,key:e._id})})))}}]),n}(a.Component),Se={loadReviews:se},ke=Object(d.b)((function(e){return{reviews:e.reviewReducer.reviews}}),Se)(we),xe=n(77),Ce=n.n(xe),Ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.closeModal=function(){e.setState({isShown:!1}),e.props.onToggleChat()},e}return Object(i.a)(n,[{key:"render",value:function(){this.state.isShown;var e=this.props.children;return r.a.createElement("div",{className:"modal-content ",onClick:function(e){return e.stopPropagation()}},r.a.createElement(g.a,{className:"close-modal",onClick:this.closeModal},r.a.createElement(Ce.a,null)),e)}}]),n}(a.Component),Ne=n(114),Te=n.n(Ne),Ue={setup:function(){je=Te()("/")},terminate:function(){je=null},on:function(e,t){je.on(e,t)},off:function(e,t){je.off(e,t)},emit:function(e,t){je.emit(e,t)}};var Re=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:{username:"Me",txt:""},msgs:[],chatId:"",isTyping:!1,isTypingMsg:""},e.addMsg=function(t){t.username===e.props.loggedInUser.username&&(t.username="Me"),e.setState((function(e){return{msgs:[].concat(Object(be.a)(e.msgs),[t])}}))},e.sendMsg=function(t){t.preventDefault();var n=e.props.loggedInUser.username;Ue.emit("chat newMsg",{msg:e.state.msg,toyId:e.props.toyId}),e.setState({msg:{username:n,txt:""},isTypingMsg:""})},e.handleInput=function(t){var n=t.target,a=n.name,r=n.value,o=r?e.state.isTypingMsg:"";e.setState({msg:Object(m.a)(Object(m.a)({},e.state.msg),{},Object(p.a)({},a,r)),isTypingMsg:o})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.loggedInUser,a=t.toyId;Ue.setup(),Ue.emit("chat id",a),Ue.on("chat addMsg",this.addMsg),Ue.on("get msgs",(function(t){e.setState({msgs:t})})),Ue.on("userTyping",(function(t){var n=t?"".concat(t," is typing..."):"";e.setState({isTypingMsg:n})})),this.setState((function(e){return Object(m.a)(Object(m.a)({},e),{},{msg:Object(m.a)(Object(m.a)({},e.msg),{},{username:n.username})})}))}},{key:"componentWillUnmount",value:function(){Ue.off("chat addMsg",this.addMsg),Ue.terminate()}},{key:"componentDidUpdate",value:function(e,t){t.msg.txt!==this.state.msg.txt&&(this.state.msg.txt?Ue.emit("user typing",this.props.loggedInUser.username):Ue.emit("user typing",null))}},{key:"render",value:function(){return r.a.createElement("div",{className:"chat-container"},this.state.isTypingMsg&&r.a.createElement("span",{className:"typing-msg"},this.state.isTypingMsg),r.a.createElement("ul",{className:"chat-msgs"},this.state.msgs.map((function(e){return r.a.createElement("li",{key:e.txt},r.a.createElement("h4",null,e.username,":"),r.a.createElement("span",null," ",e.txt))}))),r.a.createElement("form",{onSubmit:this.sendMsg,action:""},r.a.createElement(W.a,{autoComplete:"off",value:this.state.msg.txt,onChange:this.handleInput,type:"text",placeholder:"Type Message",name:"txt"}),r.a.createElement(V.a,{variant:"text",className:"send-btn",onClick:this.sendMsg},"Send")))}}]),n}(a.Component),_e=Object(d.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}))(Re),Me=n(115),Ae=n.n(Me),De=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toy:{},reviewToEdit:{},isChatOn:!1},e.onToggleChat=function(){if(e.props.loggedInUser){console.log("onOpenChat -> this.state",e.state);var t=e.state.isChatOn;e.setState(Object(m.a)(Object(m.a)({},e.state),{},{isChatOn:!t}))}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadtoy();case 2:return e.next=4,this.props.loadReviews({toyId:this.state.toy._id});case 4:console.log("componentDidMount -> this.state",this.state);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadtoy",value:function(){var e=Object(U.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,Y.getById(t);case 3:n=e.sent,this.setState({toy:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.toy;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"toy-details"},r.a.createElement("div",{className:"toy-detail"},r.a.createElement("h3",null,"Name: "),r.a.createElement("span",null,t.name)),r.a.createElement("div",{className:"toy-detail"},r.a.createElement("h3",null,"Price: "),r.a.createElement("span",null,t.price)),r.a.createElement("div",{className:"toy-detail"},r.a.createElement("h3",null,"Type: "),r.a.createElement("span",null,t.type)),r.a.createElement("div",{className:"toy-detail"},r.a.createElement("h3",null,"Created at: "),r.a.createElement("span",null,new Date(t.createdAt).toLocaleDateString())),r.a.createElement("div",{className:"toy-detail"},r.a.createElement("h3",null,"In Stock: "),r.a.createElement("span",null,t.inStock?"yes":"no"))),r.a.createElement("section",{className:"add-review-btn"},r.a.createElement(V.a,{variant:"outlined"},"Add Review")),r.a.createElement("section",{onClick:function(){e.onToggleChat()},className:"chat-btn-container"},r.a.createElement(Ae.a,{fontSize:"large",className:"chat-btn"})),this.props.loggedInUser&&r.a.createElement(ke,null),this.state.isChatOn&&r.a.createElement(Ie,{onToggleChat:this.onToggleChat},r.a.createElement(_e,{toyId:t._id}))):r.a.createElement("div",null,"Loading...")}}]),n}(a.Component),Le={loadReviews:se},Pe=Object(d.b)((function(e){return{toys:e.toyReducer.toys,loggedInUser:e.userReducer.loggedInUser}}),Le)(De),Be=(n(190),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{email:"",password:""}},e.loginHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{loginCred:Object(m.a)(Object(m.a)({},e.loginCred),{},Object(p.a)({},a,r))}}))},e.doLogin=function(){var t=Object(U.a)(T.a.mark((function t(n){var a,r,o,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.state.loginCred,r=a.email,o=a.password,r&&o){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:s={email:r,password:o},e.props.login(s),e.setState({loginCred:{email:"",password:""}}),e.props.history.push("/toy");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this,t=r.a.createElement("form",{className:"login-form",onSubmit:this.doLogin},r.a.createElement(W.a,{type:"text",autoComplete:"off",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement(W.a,{type:"password",autoComplete:"off",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement(V.a,{onClick:this.doLogin},"Login")),n=this.props.loggedInUser;return r.a.createElement("div",{className:"test"},r.a.createElement("h2",null,this.state.msg),n&&r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome:  ",n.username),r.a.createElement("button",{onClick:this.props.logout},"Logout")),!n&&t,r.a.createElement("div",{className:"sign-up-btn-container"}),r.a.createElement("hr",null),r.a.createElement(V.a,{className:"sign-up-btn",onClick:function(){e.props.history.push("/signup")}},"Sign up"),this.props.isLoading&&"Loading...",!1)}}]),n}(a.Component)),Ye={login:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:ae,signup:ne,removeUser:function(e){return function(){var t=Object(U.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.remove(e);case 3:n({type:"USER_REMOVE",userId:e}),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:function(){return function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,K.getUsers();case 4:n=e.sent,t({type:"SET_USERS",users:n}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,t({type:"LOADING_DONE"}),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,8,10,13]])})));return function(t){return e.apply(this,arguments)}}()}},qe=Object(d.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),Ye)(Be),Ve=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",signupCred:{email:"",password:"",username:""}},e.signupHandleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return{signupCred:Object(m.a)(Object(m.a)({},e.signupCred),{},Object(p.a)({},a,r))}}))},e.doSignup=function(){var t=Object(U.a)(T.a.mark((function t(n){var a,r,o,s,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log("hey"),a=e.state.signupCred,r=a.email,o=a.password,s=a.username,r&&o&&s){t.next=5;break}return t.abrupt("return",e.setState({msg:"All TextFields are required!"}));case 5:c={email:r,password:o,username:s},e.props.signup(c),e.setState({signupCred:{email:"",password:"",username:""}}),e.props.history.push("/toy");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeUser=function(t){e.props.removeUser(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=r.a.createElement("form",{className:"signup-form",onSubmit:this.doSignup},r.a.createElement(W.a,{type:"text",autoComplete:"off",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement(W.a,{name:"password",type:"password",autoComplete:"off",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement(W.a,{type:"text",autoComplete:"off",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),r.a.createElement("br",null),r.a.createElement(V.a,{onClick:this.doSignup,className:"signup-btn"},"Signup")),t=this.props.loggedInUser;return console.log("render -> loggedInUser",t),r.a.createElement("div",{className:"login-form"},r.a.createElement("h2",null,this.state.msg),t&&r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome:  ",t.username),r.a.createElement("button",{onClick:this.props.logout},"Logout")),!t&&e,r.a.createElement("hr",null),this.props.isLoading&&"Loading...",!1)}}]),n}(a.Component),We={signup:ne},Fe=Object(d.b)((function(e){return console.log("state",e),{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),We)(Ve),He=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("main",{className:"main-toy-app"},r.a.createElement("header",{className:"main-header"},r.a.createElement(de,{logout:this.props.logout})),r.a.createElement(ue.c,null,r.a.createElement(ue.a,{component:Pe,path:"/details/:toyId"}),r.a.createElement(ue.a,{component:ye,path:"/edit/:toyId"}),r.a.createElement(ue.a,{component:ye,path:"/edit"}),r.a.createElement(ue.a,{component:le,path:"/toy"}),r.a.createElement(ue.a,{component:Fe,path:"/signup"}),r.a.createElement(ue.a,{component:qe,path:"/"})))}}]),n}(a.Component),ze={loadToys:q,logout:ae},Je=Object(d.b)((function(e){return{toys:e.toyReducer.toys}}),ze)(He);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge=n(42),Xe=n(116),$e={toys:[]};var Ke=null;sessionStorage.user&&(Ke=JSON.parse(sessionStorage.user));var Qe={loggedInUser:Ke,users:[]};var Ze=Object(Ge.c)({toyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(m.a)(Object(m.a)({},e),{},{toys:t.toys});case"REMOVE_TOY":return Object(m.a)(Object(m.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t.toyId}))});case"ADD_TOY":var n=e.toys.slice();return Object(m.a)(Object(m.a)({},e),{},{toys:[t.toy].concat(Object(be.a)(n))});case"UPDATE_TOY":var a=e.toys.findIndex((function(e){return e._id===t.toy._id})),r=e.toys.slice();return r.splice(a,1,t.toy),{toys:r};default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(m.a)(Object(m.a)({},e),{},{loggedInUser:t.user});case"USER_REMOVE":return Object(m.a)(Object(m.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:t.users});default:return e}},reviewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(m.a)(Object(m.a)({},e),{},{reviews:t.reviews});case"REVIEW_ADD":return Object(m.a)(Object(m.a)({},e),{},{reviews:[].concat(Object(be.a)(e.reviews),[t.review])});case"REVIEW_UPDATE":return Object(m.a)(Object(m.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}}}),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ge.d,tt=Object(Ge.e)(Ze,et(Object(Ge.a)(Xe.a)));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:tt},r.a.createElement(h.a,null,r.a.createElement(Je,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.b8960420.chunk.js.map